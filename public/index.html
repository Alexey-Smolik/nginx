<!DOCTYPE html>
<html>
<head>
    <style>
        textarea {
            white-space: pre;
            width: 400px;
            height: 300px;
        }
    </style>
    <script src="jquery.min.js"></script>
</head>
<body>
    <input type="file"/>
    <br/><br/>
    <textarea></textarea>
    <br/>
    <button id="save" disabled="true" onclick="saveFile()">Сохранить</button><br/><br/>
    Команда: <input type="text" id="cmd" placeholder="команда">
    <button id="restart" onclick="restart()">Restart</button>
<script type="text/javascript">
    const input = document.querySelector("input[type=file]");
    const text = document.querySelector("textarea");
    const saveButton = document.querySelector("#save");
    var name;
    var backup;

    input.onchange = function(e) {
        backup = text.value;
        var reader = new FileReader();
        reader.onload = function(event) {
            text.value = event.target.result;
            backup = text.value;
            saveButton.disabled = false;
        };

        name = e.target.files[0].name;
        reader.readAsText(new Blob([e.target.files[0]], {
            "type": "application/json"
        }));
    };

    function saveFile(){
        $.ajax({
            url: "/upload",
            type: 'POST',
            data: {
                text: text.value,
                backup: text.value
            },
            success: function(result){
                alert(result);
            },
            error: function(err) {
                alert(err.message);
            }
        });
    }
    
    function restart(){
        $.ajax({
            url: "/restart",
            type: 'POST',
            data: {
                command: $('#cmd').val()
            },
            success: function(result){
                alert(result);
            },
            error: function(err) {
                alert(err.message);
            }
        });
    }
</script>
</body>
</html>